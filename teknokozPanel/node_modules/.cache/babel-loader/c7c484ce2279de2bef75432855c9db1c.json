{"ast":null,"code":"import { createStore } from 'vuex';\nimport axios from \"axios\";\nimport router from \"@/router\";\nexport default createStore({\n  state: {\n    token: '',\n    grant_type: 'password',\n    scope: '',\n    client_id: 4,\n    client_secret: '1cDfYZfMmZ69JF5iWHlkJsTt158qDmcjDHtfeeny'\n  },\n  getters: {\n    isAuth(state) {\n      return state.token !== '';\n    }\n\n  },\n  mutations: {\n    setToken(state, token) {\n      state.token = token;\n    },\n\n    clearToken(state) {\n      state.token = '';\n    }\n\n  },\n  actions: {\n    initAuth({\n      commit,\n      dispatch\n    }) {\n      let token = localStorage.getItem('token');\n\n      if (token) {\n        commit(\"setToken\", token);\n        router.push(\"/\");\n      } else {\n        router.push(\"/login\");\n        return false;\n      }\n    },\n\n    login({\n      commit,\n      dispatch,\n      state\n    }, authData) {\n      return axios.post('http://127.0.0.1:8000/oauth/token', {\n        username: authData.email,\n        password: authData.password,\n        grant_type: state.grant_type,\n        scope: state.scope,\n        client_id: state.client_id,\n        client_secret: state.client_secret\n      }).then(response => {\n        commit(\"setToken\", response.data.access_token);\n        localStorage.setItem('token', response.data.access_token);\n        console.log(response.data.expires_in / 10);\n        dispatch(\"setTimeOut\", +response.data.expires_in / 10);\n      });\n    },\n\n    logOut({\n      commit,\n      dispatch,\n      state\n    }) {\n      commit(\"clearToken\");\n      localStorage.removeItem('token');\n      router.replace(\"/login\");\n    },\n\n    setTimeOut({\n      dispatch\n    }, expiresIn) {\n      setTimeout(() => {\n        dispatch(\"logOut\");\n      }, expiresIn);\n    }\n\n  },\n  modules: {}\n});","map":{"version":3,"names":["createStore","axios","router","state","token","grant_type","scope","client_id","client_secret","getters","isAuth","mutations","setToken","clearToken","actions","initAuth","commit","dispatch","localStorage","getItem","push","login","authData","post","username","email","password","then","response","data","access_token","setItem","console","log","expires_in","logOut","removeItem","replace","setTimeOut","expiresIn","setTimeout","modules"],"sources":["/Users/gurhankoz/Desktop/teknokozpanel/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport axios from \"axios\";\nimport router from \"@/router\";\n\nexport default createStore({\n  state: {\n    token: '',\n    grant_type: 'password',\n    scope: '',\n    client_id: 4,\n    client_secret: '1cDfYZfMmZ69JF5iWHlkJsTt158qDmcjDHtfeeny' ,\n  },\n  getters: {\n    isAuth(state){\n      return state.token !== '';\n    },\n  },\n  mutations: {\n    setToken(state,token){\n      state.token = token;\n    },\n    clearToken(state){\n      state.token = ''\n    },\n  },\n  actions: {\n    initAuth({commit,dispatch}){\n      let token = localStorage.getItem('token')\n      if(token){\n        commit(\"setToken\",token)\n        router.push(\"/\")\n      }else {\n        router.push(\"/login\")\n        return false\n      }\n    },\n    login({commit,dispatch,state},authData){\n      return axios.post(\n          'http://127.0.0.1:8000/oauth/token',\n          {\n            username: authData.email,\n            password: authData.password,\n            grant_type: state.grant_type,\n            scope: state.scope,\n            client_id: state.client_id,\n            client_secret: state.client_secret,\n          }).then(response => {\n            commit(\"setToken\",response.data.access_token);\n            localStorage.setItem('token',response.data.access_token)\n            console.log( response.data.expires_in / 10)\n            dispatch(\"setTimeOut\", +response.data.expires_in / 10)\n      })\n    },\n    logOut({commit,dispatch,state}){\n      commit(\"clearToken\");\n      localStorage.removeItem('token')\n      router.replace(\"/login\");\n    },\n    setTimeOut({dispatch}, expiresIn){\n      setTimeout(()=>{\n        dispatch(\"logOut\")\n      },expiresIn)\n    },\n\n  },\n  modules: {\n  }\n})\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,MAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,eAAeF,WAAW,CAAC;EACzBG,KAAK,EAAE;IACLC,KAAK,EAAE,EADF;IAELC,UAAU,EAAE,UAFP;IAGLC,KAAK,EAAE,EAHF;IAILC,SAAS,EAAE,CAJN;IAKLC,aAAa,EAAE;EALV,CADkB;EAQzBC,OAAO,EAAE;IACPC,MAAM,CAACP,KAAD,EAAO;MACX,OAAOA,KAAK,CAACC,KAAN,KAAgB,EAAvB;IACD;;EAHM,CARgB;EAazBO,SAAS,EAAE;IACTC,QAAQ,CAACT,KAAD,EAAOC,KAAP,EAAa;MACnBD,KAAK,CAACC,KAAN,GAAcA,KAAd;IACD,CAHQ;;IAITS,UAAU,CAACV,KAAD,EAAO;MACfA,KAAK,CAACC,KAAN,GAAc,EAAd;IACD;;EANQ,CAbc;EAqBzBU,OAAO,EAAE;IACPC,QAAQ,CAAC;MAACC,MAAD;MAAQC;IAAR,CAAD,EAAmB;MACzB,IAAIb,KAAK,GAAGc,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;MACA,IAAGf,KAAH,EAAS;QACPY,MAAM,CAAC,UAAD,EAAYZ,KAAZ,CAAN;QACAF,MAAM,CAACkB,IAAP,CAAY,GAAZ;MACD,CAHD,MAGM;QACJlB,MAAM,CAACkB,IAAP,CAAY,QAAZ;QACA,OAAO,KAAP;MACD;IACF,CAVM;;IAWPC,KAAK,CAAC;MAACL,MAAD;MAAQC,QAAR;MAAiBd;IAAjB,CAAD,EAAyBmB,QAAzB,EAAkC;MACrC,OAAOrB,KAAK,CAACsB,IAAN,CACH,mCADG,EAEH;QACEC,QAAQ,EAAEF,QAAQ,CAACG,KADrB;QAEEC,QAAQ,EAAEJ,QAAQ,CAACI,QAFrB;QAGErB,UAAU,EAAEF,KAAK,CAACE,UAHpB;QAIEC,KAAK,EAAEH,KAAK,CAACG,KAJf;QAKEC,SAAS,EAAEJ,KAAK,CAACI,SALnB;QAMEC,aAAa,EAAEL,KAAK,CAACK;MANvB,CAFG,EASAmB,IATA,CASKC,QAAQ,IAAI;QAClBZ,MAAM,CAAC,UAAD,EAAYY,QAAQ,CAACC,IAAT,CAAcC,YAA1B,CAAN;QACAZ,YAAY,CAACa,OAAb,CAAqB,OAArB,EAA6BH,QAAQ,CAACC,IAAT,CAAcC,YAA3C;QACAE,OAAO,CAACC,GAAR,CAAaL,QAAQ,CAACC,IAAT,CAAcK,UAAd,GAA2B,EAAxC;QACAjB,QAAQ,CAAC,YAAD,EAAe,CAACW,QAAQ,CAACC,IAAT,CAAcK,UAAf,GAA4B,EAA3C,CAAR;MACL,CAdM,CAAP;IAeD,CA3BM;;IA4BPC,MAAM,CAAC;MAACnB,MAAD;MAAQC,QAAR;MAAiBd;IAAjB,CAAD,EAAyB;MAC7Ba,MAAM,CAAC,YAAD,CAAN;MACAE,YAAY,CAACkB,UAAb,CAAwB,OAAxB;MACAlC,MAAM,CAACmC,OAAP,CAAe,QAAf;IACD,CAhCM;;IAiCPC,UAAU,CAAC;MAACrB;IAAD,CAAD,EAAasB,SAAb,EAAuB;MAC/BC,UAAU,CAAC,MAAI;QACbvB,QAAQ,CAAC,QAAD,CAAR;MACD,CAFS,EAERsB,SAFQ,CAAV;IAGD;;EArCM,CArBgB;EA6DzBE,OAAO,EAAE;AA7DgB,CAAD,CAA1B"},"metadata":{},"sourceType":"module"}